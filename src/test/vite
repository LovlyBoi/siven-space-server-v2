# Vite

Vite 是基于 ES Module 的打包构建工具。Vite 意图解决原先使用 Webpack 在浏览器端进行开发时的缓慢构建问题。

## 构建工具

### 作用

Vite 属于构建工具，作为一个构建工具，Vite 和它的前辈们（Webpack、Rollup 等）完成的工作是：

- 不同文件的转换和集成（将 TS，Less 等资源，转换编译输出）。
- 不同模块化规范的统一打包。
- 提供开发服务器。

Vite 不同于 Webpack，Webpack 自己实现了模块化，他在构建时需要将整个依赖图转换一遍。但是 Vite 依赖于 浏览器原生 ES Module，Vite 只会去处理浏览器实际请求的那部分依赖图。

### 依赖预构建

Vite 在首次启动时会进行依赖预构建，预构建会将所有依赖转为 ESM 模块，并将有很多依赖的模块，集成为单个模块，以减少 HTTP 请求。值得一提的是，这里 Vite 使用 esbuild 预构建依赖，打包速度比 JS 打包器快 10 ~ 100 倍。

Vite 在一开始，就将模块分为**依赖**和**源码**两部分：

- 依赖不经常变动，且可能存在多种模块化格式（CJS，ESM）。对于依赖，Vite 会进行预构建依赖，将依赖处理后放在 `node_modules/.vite/deps` 文件夹下。
- 源码经常变动，需要被转换。